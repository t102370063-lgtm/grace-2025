<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2025 å°ç£æ©æ…ˆå°¾ç‰™ç•™è¨€æ¿</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@600&display=swap" rel="stylesheet">
    <style>
        :root { --gold-main: #c49a28; }

        body { 
            background-color: #050505; 
            margin: 0; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            min-height: 100vh; 
            overflow: hidden; /* é˜²æ­¢æ‰‹æ©Ÿæ©¡çš®ç­‹å›å½ˆ */
            font-family: 'Noto Serif TC', serif;
        }

        /* === æµ®æ°´å°å±¤ï¼šç¨ç«‹ DIV ç¢ºä¿é¡¯ç¾ === */
        #watermark-layer {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 1; /* æ”¾åœ¨èƒŒæ™¯ä¹‹ä¸Š */
            /* ç¨å¾®åŠ æ·±é¡è‰²åˆ° 0.1 ç¢ºä¿è‚‰çœ¼å¯è¦‹ */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='250' height='150' viewBox='0 0 250 150'%3E%3Ctext x='0' y='80' fill='rgba(196, 154, 40, 0.1)' font-family='Arial' font-size='16' transform='rotate(-25 125 75)'%3ETAIWAN GRACE%3C/text%3E%3C/svg%3E");
            background-repeat: repeat;
            pointer-events: none;
        }

        /* ç²’å­èƒŒæ™¯å±¤ */
        .bg-particles {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 2; pointer-events: none;
        }
        .particle {
            position: absolute; border-radius: 50%;
            background: rgba(196, 154, 40, 0.4);
            animation: float 15s infinite linear;
        }
        @keyframes float {
            0% { transform: translateY(110vh) translateX(0); opacity: 0; }
            50% { opacity: 0.8; }
            100% { transform: translateY(-10vh) translateX(30px); opacity: 0; }
        }

        /* å…§å®¹å®¹å™¨ */
        .container {
            position: relative;
            z-index: 10; /* ç¢ºä¿åœ¨æœ€å‰æ–¹ */
            width: 85%;
            max-width: 400px;
            padding: 40px 25px;
            border: 1px solid rgba(196, 154, 40, 0.4);
            background: rgba(15, 15, 15, 0.9);
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.9);
            text-align: center;
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
        }

        h2 { 
            font-size: 26px; margin: 0 0 15px 0; 
            background: linear-gradient(135deg, #ffecb3, #c49a28);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        p { font-size: 14px; color: #bbb; line-height: 1.6; margin-bottom: 30px; }

        input { 
            width: 100%; padding: 16px; border: 1px solid var(--gold-main); 
            background: #000; color: #fff; border-radius: 10px; 
            font-size: 16px; box-sizing: border-box; outline: none;
            -webkit-appearance: none; /* ç§»é™¤ iOS é è¨­é™°å½± */
        }

        .hint { font-size: 12px; color: #777; margin-top: 12px; text-align: left; }

        button { 
            margin-top: 30px; width: 100%; padding: 18px; 
            background: linear-gradient(135deg, #c49a28, #8c6d1c); 
            color: #000; border: none; font-weight: 900; 
            border-radius: 10px; font-size: 18px; cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.4);
        }
        button:active { transform: scale(0.97); }
    </style>
</head>
<body>

    <div id="watermark-layer"></div>

    <div class="bg-particles" id="particle-container"></div>

    <div class="container">
        <h2>æ©æ…ˆè¨±é¡˜æ± </h2>
        <p>è®“æ‚¨çš„è©±èªåŒ–ä½œæµæ˜Ÿï¼Œé–ƒè€€åœ¨æ©æ…ˆå°¾ç‰™ç››å®´ï¼<br>å¯«ä¸‹æƒ³èªªçš„è©±ï¼Œæˆ‘å€‘å¹«ä½ é€ä¸Šå¤§è¢å¹• âœ¨</p>
        
        <input type="text" id="msg" placeholder="è¼¸å…¥å…§å®¹ï¼ˆé™ 20 å­—ï¼‰" maxlength="20">
        <div class="hint">ğŸ’¡ æ­¡è¿ä½¿ç”¨ ğŸ¥³ ğŸ§§ ğŸ® ğŸº</div>
        
        <button onclick="send()">é»äº®å¤§è¢å¹•</button>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAbgicIQNbQhUvNND0ML-NpjGqI39pSFiA",
            authDomain: "grace-2025.firebaseapp.com",
            databaseURL: "https://grace-2025-default-rtdb.firebaseio.com",
            projectId: "grace-2025",
            storageBucket: "grace-2025.firebasestorage.app",
            messagingSenderId: "204671855260",
            appId: "1:204671855260:web:257182746d05d6f79d1b59",
            measurementId: "G-RQM3HH5F6M"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        window.send = function() {
            const text = document.getElementById('msg').value;
            if (text.trim() === "") return;
            
            push(ref(db, 'danmaku'), { 
                text: text, 
                time: Date.now() 
            }).then(() => {
                document.getElementById('msg').value = "";
                alert("ç™¼é€æˆåŠŸï¼å¿«çœ‹å¤§è¢å¹• ğŸš€");
            }).catch(() => {
                alert("å‚³é€å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·š");
            });
        }

        // å‹•æ…‹ç”Ÿæˆç²’å­é‚è¼¯
        const pContainer = document.getElementById('particle-container');
        for (let i = 0; i < 15; i++) {
            const p = document.createElement('div');
            p.className = 'particle';
            const size = Math.random() * 4 + 2 + 'px';
            p.style.width = size; p.style.height = size;
            p.style.left = Math.random() * 100 + 'vw';
            p.style.animationDuration = (Math.random() * 10 + 10) + 's';
            p.style.animationDelay = (Math.random() * 5) + 's';
            pContainer.appendChild(p);
        }
    </script>
</body>
</html>